<div class="container">
	<div class="responsive">
		<div class="gallery">
			<a target="_blank" href="https://img.chooseacottage.co.uk/property/935/840/935665.jpg">
				<img src="https://img.chooseacottage.co.uk/property/935/840/935665.jpg" alt="Cinque Terre" width="600" height="400">
			</a>
		</div>
	</div>
	<div class="responsive">
		<div class="gallery">
			<a target="_blank" href="https://img.chooseacottage.co.uk/property/108/840/10876276.jpg">
				<img src="https://img.chooseacottage.co.uk/property/108/840/10876276.jpg" alt="Cinque Terre" width="600" height="400">
			</a>
		</div>
	</div>
	<div class="responsive">
		<div class="gallery">
			<a target="_blank" href="https://img.chooseacottage.co.uk/property/108/840/10876272.jpg">
				<img src="https://img.chooseacottage.co.uk/property/108/840/10876272.jpg" alt="Cinque Terre" width="600" height="400">
			</a>
		</div>
	</div>
	<div class="responsive">
		<div class="gallery">
			<a target="_blank" href="https://img.chooseacottage.co.uk/property/935/840/935669.jpg">
				<img src="https://img.chooseacottage.co.uk/property/935/840/935669.jpg" alt="Cinque Terre" width="600" height="400">
			</a>
		</div>
	</div>
	<div class="clearfix"></div>
	<div class="text-center">
		<h1 class="display-4">Welcome to Tuckenhay Mill - 1 Castle Cottage</h1>
		<h5 class="display-5">Bow Creek, between Dartmouth and Totnes, Devon | FCK</h5>
	</div>
	<div class="clearfix"></div>
	<br />

	<button type="button" id="chargePoints" class="btn btn-info" data-toggle="collapse" data-target="#contents">ELECTRIC CHARGING POINTS NEARBY:</button>
	  <br />
	  <div id="contents" class="collapse"> </div>
	  <div id="contentsDetails" class="collapse"> </div>
	  <br />
	  <div class="clearfix"></div>
		<div id="map" class="map" />
		<div class="clearfix"></div>
</div>


<script type="text/javascript">
		 function initMap() {
		 const location = { lat: 50.390392, lng: -3.665670 };
		   map = new google.maps.Map(document.getElementById("map"), {
				 center: location,
				 minZoom: 4,
				 maxZoom: 20,
				 zoom: 10,
				 panControl: false,
				 draggable: true,
				 navigationControl: false,
				 mapTypeControl: false,
				 scaleControl: false,
				 scrollwheel: false,
				 streetViewControl: false,
				 zoomControl: true,
				 mapTypeId: google.maps.MapTypeId.ROADMAP
			  });
			 addMarkerToMap(location.lat, location.lng, "https://www.bluechipholidays.co.uk/assets/pin-property-single.png?v=745ed4ed66696b93478cc2135a0f0ea1");
		 }

		 function addMarker(location, icon) {
			 marker = new google.maps.Marker({
				 position: location,
				 map: map,
				 icon: icon
			 });
		 }

		 function addMarkerToMap(lat, long, icon) {
				centralPark = new google.maps.LatLng(lat, long);
				addMarker(centralPark, icon);
		 }

		 var stations = [];
		 $(function () {
			 $("#chargePoints").click(function () {
				 $.ajax({
					 type: "GET",
					 url: "/Home/GetElecricChargingPoints",
					 success: function (response) {
						 stations = response;
						 $('#contents').html('');
						 for (let i = 0; i < response.length; i++) {
							  $('<br/><img src="https://www.bluechipholidays.co.uk/assets/pin-food-med.png?v=aab8bac20d59f77a9e2252f0aba439db">&nbsp<a href="#" class="text-left" onclick="getStationDetails('+i+')" data-toggle="collapse" data-target="#contentsDetails">'+response[i].name+'</a>').appendTo('#contents');
							 addMarkerToMap(response[i].latitude, response[i].longitude, "https://www.bluechipholidays.co.uk/assets/pin-food-med.png?v=aab8bac20d59f77a9e2252f0aba439db");
						 }
					 },
					 failure: function (response) {
						 alert(response.responseText);
					 },
					 error: function (response) {
						 alert(response.responseText);
					}
				 });
			 });
		 });

	function getStationDetails(id) {
		var stationContent = stations[id];
		var text = '<h5 class="text-left">'+ stationContent.name + '</h5><br/>' + '<br />'
		+ '<img src="https://www.bluechipholidays.co.uk/assets/pin-food-med.png?v=aab8bac20d59f77a9e2252f0aba439db">&nbsp' +
		stationContent.address.buildingName + '<br />' + stationContent.address.thoroughfare
		+ stationContent.address.county+ stationContent.address.postCode +'<br />'+ "United Kingdom <br />"
		+'<a target="_blank" href="https://www.google.com/maps/dir/'+ stationContent.latitude+ ',%20' + stationContent.longitude +'/" id="direction" class="btn btn-info" >Get Directions</a><br />'
		+  'Network / Operator: ' + stationContent.operatorName + '<br />' + 'Number Of Stations/Bays: ' + stationContent.connectors.length + '<br />'
		+ '<a target="_blank" href="https://'+stationContent.paymentInformation.replace('visit ', '') + '" class="btn btn-info" >Usage Cost</a><br />';

		for(let i = 0; i < stationContent.connectors.length; i++){
			var connector = '<br/>' + stationContent.connectors[i].connectorType + '(' + parseInt(stationContent.connectors[i].ratedOutputkW) +' KW)<br/>'
			+  'Status : ' + stationContent.connectors[i].chargePointStatus + '<br/>'
			+  'ChargeMethod : ' + stationContent.connectors[i].chargeMethod + '<br/> <br/>';
			text = text.concat(connector);
		}

		$('#contentsDetails').html('');
		$('<span href="#" class="text-left" >'+text+'</span>').appendTo('#contentsDetails');
	}
</script>
